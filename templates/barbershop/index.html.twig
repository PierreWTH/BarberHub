{% extends 'base.html.twig' %}

{% block title %}Tous les barbiers{% endblock %}

{% block body %}

<h1> Tous les barbiers </h1>

{% if is_granted('ROLE_ADMIN') %}

<p><a href="{{path ('add_barbershop')}}"> Ajouter un barbier </a></p>

{% endif %}

{# Barre de recherche #}

<section class="barbershop-cards-container">
{% for barbershop in allBarbershops %}
{% for pics in barbershop.barbershopPics %}
  
    <article class="barbershop-card card-template">
        <div class="card-info-hover">
            {% if app.user %}
                
            <a href="{{ path('like_barbershop', {id: barbershop.id}) }}"  data-action = "like">
                <i class="fa-regular fa-heart {{ app.user in barbershop.likes ? 'hidden' : '' }}" id="heartUnfilled"></i>
                <i class="fa-solid fa-heart {{ app.user in barbershop.likes ? '' : 'hidden' }}" id="heartFilled"></i>
            </a>
            {% endif %}
            <p> {{barbershop.description|slice(0, 250)}}... </p>
        </div>

        <div class="barbershop-card-img"></div>
        <a href="{{path ('show_barbershop', {id : barbershop.id })}}" class="barbershop-card-link">
            <div class="barbershop-card-img-hover">
                <img src="{{asset('assets/uploads/barbershopPics/' ~ pics.nom)}}" alt="">
            </div>
        </a>
        <div class="barbershop-card-info">
            <span class="barbershop-card-note">A faire </span>
            <h3 class="barbershop-card-title">{{barbershop.nom}}</h3>
            <p class="barbershop-card-adress">{{barbershop.adresse}} - {{ barbershop.ville}}</p>
            
            {% if is_granted('ROLE_ADMIN') %}
    
            <p><a href="{{path ('edit_barbershop', {id : barbershop.id })}}" class="barber-admin-link">Editer</a> | 
            <a href="{{path ('delete_barbershop', {id : barbershop.id })}}" class="barber-admin-link">Supprimer</a></p>

            {% endif %}
        </div>
    </article>
    
    {% endfor %}
    {% endfor %}

</section>


{{ knp_pagination_render(allBarbershops) }}

{% block javascripts %}

<script src="{{ asset('js/like.js')}}"></script>

{% endblock javascripts %}

{% endblock %}
