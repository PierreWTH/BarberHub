{% extends 'base.html.twig' %}

{% block title %} Administration {% endblock %}

{% block body %}
<section class="admin-pannel">
    {% include "security/admin/_sidebar.html.twig" %}
    
<div class="admin-pannel-content-flex">

    {% include "security/admin/_adminBarberCards.html.twig" %}

    {{ knp_pagination_render(barbershops) }}

</div>


</section>
{% block javascript %}

<script>
    
    $(document).ready(function() {
        $('.validate-barber').click(function(e) {
            e.preventDefault();
            var barbershopId = $(this).data('barbershop-id'); 
            var $link = $(this);
            var $etat = $link.closest('.validate-etat')
            $.ajax({
                type: "POST",
                url: "/barbershop/" + barbershopId + "/validate",
                contentType: 'application/json',
                success: function(response) {
                    console.log(response)
                    if ($link.text() == 'Publier') {
                        $link.text('Retirer');
                    } else {
                        $link.text('Publier');
                    }
                },
                error: function(xhr, status, error) {
                    console.error(error);
                }
            });
        });
    });
      

</script>
    
{% endblock %}
{% endblock %}
